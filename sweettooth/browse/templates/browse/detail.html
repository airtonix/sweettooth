{% extends "base.html" %}
{% load thumbnail %}
{% block body %}
    <div class="extension" data-uuid="{{ extension.uuid }}" data-manifest="{{ manifest }}">
      <div class="button"></div>
      <h3> {{ extension.name }} </h3>
      <span class="author"> by {{ extension.creator }}</span>
      <p>
        {{ extension.description }}
      </p>

      <ul>
        {% if user == extension.creator %}
          <li><a href="{% url upload-file pk=extension.pk %}">Upload a new version</a></li>
          <li><a href="{% url upload-screenshot pk=extension.pk %}">Upload screenshot</a></li>
        {% endif %}
        {% if user.is_superuser %}
          <li><a class="featured" href="#" data-uuid="{{ extension.uuid }}"></a></li>
        {% endif %}
      </ul>

      <hr>
      <h4> Screenshots </h4>
      {% if extension.screenshot_set.count %}
      <ul>
        {% for screenshot in extension.screenshot_set.all %}
          <li>
            <p>
              {% thumbnail screenshot.image "300x200" as th %}
                <a href="{{ screenshot.image.url }}"><img src="{{ th.url }}" /></a>
              {% endthumbnail %}
            </p>
            <p>{{ screenshot.title }}</p>
          </li>
        {% endfor %}
      </ul>
      {% else %}
        This extension has no screenshots.
      {% endif %}
      <hr>

      {% load comments %}
      {% render_comment_list for extension %}
      {% render_comment_form for extension %}
    </div>
{% endblock %}
{% block document-ready %}
    {{ block.super }}
    $(".extension").buttonify();
    {% if user.is_superuser %}
    $(".featured").featureToggleify({{ extension.is_featured|yesno:"true,false" }});
    {% endif %}
{% endblock %}
